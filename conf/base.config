/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    bjorn-general Nextflow base config file
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Default config options for all compute environments
----------------------------------------------------------------------------------------
*/

process {
    // Default process configuration
    cpus = { check_max(1, 'cpus') }
    memory = { check_max(4.GB, 'memory') }
    time = { check_max(4.h, 'time') }
    errorStrategy = { task.exitStatus in [143,137,104,134,139] ? 'retry' : 'finish' }
    maxRetries = 3
    maxErrors = '-1'
    echo = false
    
    // Resource requirements
    withLabel:process_low {
        cpus = { check_max(1, 'cpus') }
        memory = { check_max(4.GB, 'memory') }
        time = { check_max(4.h, 'time') }
    }
    withLabel:process_medium {
        cpus = { check_max(4, 'cpus') }
        memory = { check_max(8.GB, 'memory') }
        time = { check_max(8.h, 'time') }
    }
    withLabel:process_high {
        cpus = { check_max(8, 'cpus') }
        memory = { check_max(16.GB, 'memory') }
        time = { check_max(16.h, 'time') }
    }
}
